ITERATION 17 — Swipe ranking v1 (balanced exploration)
SUBAGENTS: journalink-swipe (lead), journalink-aets (support), journalink-qa (support)

PRIMARY GOAL
Implement the “diverse ordering” logic:
- early session: trending/popular
- mid: mixed
- late: more obscure
and still explores outside the user’s current preferences.

PREFLIGHT
1) Confirm catalog has popularity_score + tags_json.
2) Confirm swipe_events can be queried by user.

IMPLEMENTATION TASKS
A) Build a ranking function:
   services/swipe/ranker.ts with:
   - cold start: sample across types/tags from top popularity buckets
   - warm start: compute preference weights from likes/dislikes over tags_json
   - diversity constraint: avoid repeating same type/tag too much
   - exploration knob: epsilon-greedy or novelty scoring
B) Add “Why this card?” debug toggle in UI (optional dev mode):
   - trending
   - explore
   - preference match
C) Feed swipe signals into AETS weighting:
   - liked tags increase confidence in tag universe
   - disliked tags reduce confidence / add “negative space” metadata (do not delete tags)

QA
- Confirm deck does not get stuck showing only one genre/type.
- Confirm dislikes affect future ordering slightly but not completely.

DELIVERABLES
- Ranking behaves as spec.
- Commit: "iter17: swipe ranking v1 (explore vs exploit)"
