ITERATION 21 — Consent + Compare Capsule builder (minimize + redact)
SUBAGENTS: journalink-privacy (lead), journalink-sync (support), journalink-aets (support), journalink-ui (support), journalink-qa (support)

PRIMARY GOAL
Implement Consent UI and the local Compare Capsule builder that:
- enforces mode scope (Friend / Heart / Custom topic)
- selects minimal excerpts (or summary pointers)
- redacts identifiers by default
- supports per-item approvals

PREFLIGHT
1) Sync session exists with both signatures.
2) Identify what local content can be sampled: top themes, representative items.

IMPLEMENTATION TASKS
A) Consent route: app/sync/consent.tsx
   - mode selector
   - topic chips from Themes
   - sensitive toggle default OFF
   - cloud toggle (placeholder for iter22)
   - preview: “will share X excerpts from Y themes”
B) Compare capsule builder:
   - services/compare/buildCapsule.ts
   - inputs: local vault, partner signature, consent options
   - outputs: CompareCapsule JSON with:
     - theme summaries
     - swipe preference summaries
     - OPTIONAL: short excerpts (only if user approves)
C) Session ledger entry created locally (no raw payload stored)

QA
- Capsule respects topic filters.
- Sensitive OFF excludes sensitive-tagged items.

DELIVERABLES
- Consent + capsule builder working locally.
- Commit: "iter21: consent + compare capsule builder"
